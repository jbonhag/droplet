<!doctype html>
<html>
<head>
  <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
  <style>
  .question {
    display: none;
  }
  </style>
</head>
<body>
  <form class="question" id="question1">
    <fieldset>
      <legend>How old are you?</legend>
      <ol>
        <li class="answer">
          <input type="radio" name="answer1" value="1-3 years"/>
          <label>1-3 years</label>
        </li>

        <li class="answer">
          <input type="radio" name="answer1" value="4-8 years"/>
          <label>4-8 years</label>
        </li>

        <li class="answer">
          <input type="radio" name="answer1" value="9-13 years" next="question2"/>
          <label>9-13 years</label>
        </li>

        <li class="answer">
          <input type="radio" name="answer1" value="14-18 years" next="question2"/>
          <label>14-18 years</label>
        </li>

        <li class="answer">
          <input type="radio" name="answer1" value="19-70 years" next="question2"/>
          <label>19-70 years</label>
        </li>
      </ol>
    </fieldset>
  </form>

  <form class="question" id="question2">
    <fieldset>
      <legend>Are you male or female?</legend>
      <ol>
        <li class="answer">
          <input type="radio" name="answer2" value="male" next="question5"/>
          <label>Male</label>
        </li>

        <li class="answer">
          <input type="radio" name="answer2" value="female" next="question3"/>
          <label>Female</label>
        </li>
      </ol>
    </fieldset>
  </form>

  <form class="question" id="question3">
    <fieldset>
      <legend>Are you pregnant?</legend>
      <ol>
        <li class="answer">
          <input type="radio" name="answer3" value="true" next="question4"/>
          <label>Yes</label>
        </li>

        <li class="answer">
          <input type="radio" name="answer3" value="" next="question5"/>
          <label>No</label>
        </li>
      </ol>
    </fieldset>
  </form>

  <form class="question" id="question4">
    <fieldset>
      <legend>Are you breastfeeding?</legend>
      <ol>
        <li class="answer">
          <input type="radio" name="answer4" value="true" next="question5"/>
          <label>Yes</label>
        </li>

        <li class="answer">
          <input type="radio" name="answer4" value="" next="question5"/>
          <label>No</label>
        </li>
      </ol>
    </fieldset>
  </form>

  <form class="question" id="question5">
    <fieldset>
      <legend>Do you exercise often?</legend>
      <ol>
        <li class="answer">
          <input type="radio" name="answer5" value="true" next="question6"/>
          <label>Yes</label>
        </li>

        <li class="answer">
          <input type="radio" name="answer5" value=""/>
          <label>No</label>
        </li>
      </ol>
    </fieldset>
  </form>

  <form class="question" id="question6">
    <fieldset>
      <legend>How long do you exercise for?</legend>
      Hours: <input type="text" name="hours"/>
      Minutes: <input type="text" name="minutes"/>
      <button id="calculate">Calculate!</button>
    </fieldset>
  </form>

  <script>
  $('.question:first').show();

  var age, sex, pregnant, breastfeeding, exercise, minutes, hours;

  // Move onto the next question, as specified for a particular radio button
  function nextQuestion(target) {
    var next = $(target).attr('next');
    if (!next) {
      finish();
    } else {
      $('#' + next).show();
    }
  }

  $( "input[name=answer1]" ).change(function(e) {
    $('#question1').hide();
    var target = e.target;
    age = target.value;
    nextQuestion(target);
  });

  $( "input[name=answer2]" ).change(function(e) {
    $('#question2').hide();
    var target = e.target;
    sex = target.value;
    nextQuestion(target);
  });

  $( "input[name=answer3]" ).change(function(e) {
    $('#question3').hide();
    var target = e.target;
    pregnant = target.value;
    nextQuestion(target);
  });

  $( "input[name=answer4]" ).change(function(e) {
    $('#question4').hide();
    var target = e.target;
    breastfeeding = target.value;
    nextQuestion(target);
  });

  $( "input[name=answer5]" ).change(function(e) {
    $('#question5').hide();
    var target = e.target;
    exercise = target.value;
    nextQuestion(target);
  });

  $( "button#calculate" ).click(function(e) {
    e.preventDefault();
    $('#question6').hide();
    var target = e.target;
    hours = parseInt( $("input[name=hours]").val(), 10 );
    minutes = parseInt( $("input[name=minutes]").val(), 10 );
    nextQuestion(target);
  });

  function finish() {
    var cups = 0.0;

    if (age == '1-3 years') {
      cups = 5.4;
    }

    if (age == '4-8 years') {
      cups = 7.1;
    }

    if (sex == 'male') {
      if (age == '9-13 years') {
        cups += 10.1;
      } else if (age == '14-18 years') {
        cups += 13.9;
      } else if (age == '19-70 years') {
        cups += 15.6;
      }
    } else if (sex == 'female') {
      if (age == '9-13 years') {
        cups += 8.8;
      } else if (age == '14-18 years') {
        cups += 9.7;
      } else if (age == '19-70 years') {
        cups += 11.4;
      }

      if (pregnant) {
        cups += 1;
        if (breastfeeding) {
          cups += 4;
        }
      }
    }

    if (exercise) {
      cups += (minutes / 15.0);
      cups += (hours / 4.0);
    }

    document.write('<h1>' + cups + ' cups a day</h1>');
  }

  </script>
</body>
</html>
